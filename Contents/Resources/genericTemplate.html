<html>
  <head>

<script type="text/javascript">
function getElementsByClassName( className, tagName, rootNode ) {
    rootNode = rootNode || document;
    tagName = tagName || '*';

    var result = [];
    var elements = rootNode.getElementsByTagName( tagName );
    for( var x = 0; x < elements.length; x++ ) {
        if ( !elements[x].className ) { continue; }
        var classes = elements[x].className.split( ' ' );
        for ( var y = 0; y < classes.length; y++ ) {
            if ( classes[y] != className ) { continue; }
            result.push( elements[x] );
	break;
        }
    }
    return result;
}

function markSameTimestamps() {
    var elements = getElementsByClassName( 'timestamp-value'  );
    var parentTimestamp = elements[ elements.length - 2 ];
    var currentTimestamp = elements[ elements.length - 1 ];
    elements[ elements.length - 1 ].scrollIntoView( true );

    if ( parentTimestamp.innerHTML == currentTimestamp.innerHTML ) {
        currentTimestamp.className += ' duplicateTimestamp';
    }
}

function markSameNicks() {
    var elements = getElementsByClassName( 'member'  );
    var parentTimestamp = elements[ elements.length - 2 ];
    var currentTimestamp = elements[ elements.length - 1 ];	

    if ( parentTimestamp.innerHTML == currentTimestamp.innerHTML ) {
        currentTimestamp.className += ' duplicateNick';
    }
}

function onNodeInsert() {
	markSameTimestamps();
	markSameNicks();
}

window.onload = function() {
	document.getElementById('contents').addEventListener( 'DOMNodeInserted', onNodeInsert );
}

		</script>
	</head>
  
	<body>
    		<div id="contents"></div>
  	</body>
</html>
